<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SYJPMOPMH POS</title>
  <link rel="stylesheet" href="/tailwind.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script>
    const BASE_URL = 'https://sy-jpm-pos-web-385936458000.us-central1.run.app';

    async function fetchNames() {
      try {
        const response = await fetch(`${BASE_URL}/api/names`, { method: 'GET' });
        if (!response.ok) throw new Error('Failed to fetch names');
        const data = await response.json();
        console.log('Names:', data);
        // Update dropdowns (salesSalesman, salesShopName, etc.)
      } catch (error) {
        console.error('Fetch names error:', error);
      }
    }

    async function fetchRecentSales() {
      try {
        const response = await fetch(`${BASE_URL}/api/recent-sales`, { method: 'GET' });
        if (!response.ok) throw new Error('Failed to fetch recent sales');
        const data = await response.json();
        console.log('Recent Sales:', data);
        // Update sales table
      } catch (error) {
        console.error('Fetch recent sales error:', error);
      }
    }

    async function fetchRecentDueBalances() {
      try {
        const response = await fetch(`${BASE_URL}/api/recent-due-balances`, { method: 'GET' });
        if (!response.ok) throw new Error('Failed to fetch recent due balances');
        const data = await response.json();
        console.log('Recent Due Balances:', data);
        // Update due balance dropdown
      } catch (error) {
        console.error('Fetch recent due balances error:', error);
      }
    }

    async function saveSalesData(formData) {
      try {
        const response = await fetch(`${BASE_URL}/api/save-sales`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData),
        });
        if (!response.ok) throw new Error('Failed to save sales data');
        const data = await response.json();
        console.log('Save Sales Response:', data);
        // Handle success
      } catch (error) {
        console.error('Save sales error:', error);
        // Handle error
      }
    }

    function init() {
      fetchNames();
      fetchRecentSales();
      fetchRecentDueBalances();
    }

    const App = () => {
      React.useEffect(() => {
        init();
      }, []);
      return React.createElement('div', { className: 'container mx-auto p-4' }, 'SYJPMOPMH POS App');
    };

    ReactDOM.render(React.createElement(App), document.getElementById('root'));
  </script>
</body>
</html>